<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/E.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">e-0.1.0.0: Express sensitive data inside text files in readable and compact way.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">E</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Template - representation of an encrypted or to-be-encrypted content.</a></li><li><a href="#g:2">Metatada - ciphered values store</a></li><li><a href="#g:3">Cipher values from <code>Tem</code> using <code>Metadata</code></a></li><li><a href="#g:4">Cipher actions on the filesystem</a></li><li><a href="#g:5">Simplest instance of Algs</a></li><li><a href="#g:6">Errors</a></li><li><a href="#g:7">Reexports</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><h2>Goal</h2><p>Hide sensitive data inside text files in a readable and compact manner.</p><h2>Requirements</h2><ul><li>Support various encryption/key-storing mechanisms (per encrypted value)</li><li>Adding new portion of secrets to already encrypted text file does not modify previously encrypted values</li><li>Only sensitive data is hidden, the rest is left intact.</li><li>Ciphered values should not be part of the file (in order to make it readable and compact).</li><li>Same ciphered value could be referenced many times.</li><li>[TODO] Same ciphered value could be referenced in many files.</li></ul><h2>Solution</h2><p>Assume there is a file <code>config</code> containing some sensitive data.</p><pre>host = &quot;localhost&quot;
user = &quot;foobar&quot;
password = &quot;5fce4e0edf2242e981f799b1d8e0dc62&quot;
</pre><p>In order to hide sensitive data it's need to be wrapped with a <code>Plain value</code> identifier.</p><pre>host = &quot;localhost&quot;
user = &quot;{{P|username|gpgme|kid = keyId|foobar}}&quot;
password = &quot;{{P|password|gpgme|kid = keyId|5fce4e0edf2242e981f799b1d8e0dc62}}&quot;
</pre><p>For instance, <code>{{P|username|gpgme|kid = keyId|foobar}}</code> means that it's a variable <code>username</code> with a <strong>P</strong>lain value <strong>foobar</strong> that should be encrypted with <strong>gpgme</strong> algorithm, and there are some arguments (<code>kid = keyId</code>) that would be needed during encryption process.</p><p>After things are set up, encryption could be done.</p><p>Here is how <code>config</code> file look like after encryption:</p><pre>host = &quot;localhost&quot;
user = &quot;{{E|username}}&quot;
password = &quot;{{E|password}}&quot;
</pre><p>Metadata file with encrypted values <code>.config.e</code>:</p><pre>{
    &quot;username&quot;: {
        &quot;alg&quot;: &quot;gpgme&quot;,
        &quot;args&quot;: {
          &quot;kid&quot;: &quot;keyId&quot;
        },
        &quot;value&quot;: &quot;CNMoJrL5jnbgw4UM60Ht+NXoOtdgk8iStAB8D6JAnZHyz6Z7YfdoNs4EyoqMbBhRDlRRpakbtfiIvH1GlcOt7RzQfHzv+ZNQkU2o12na<em>X6uZVw+abJYjpsG50wpkeE8h8W08htNE1JEAsgomojIlRYM973H1aoPqkgS+75fyvdadFVB9yTnSV6qOBwFJOi62wrrHpNCoJMNJMf6OX5O</em>BTaXFSxSPXQc15v6SXh5ryQb<em>Oh0VCZdzkAF4UMAi</em>Sl84WMh<em>M4XR</em>c8TfcAW3MG6v9ToWX+hPUq+jD14oZpvqWc8lNHMWibcoTt8fxm5BebvX7+8x+L0JA0RYdeSZx<em>Fww0QxMAO46slc6BSRPV78ULuS6HAOfUN5zEIXV9e9ru+4sEa+myOJPoNR2fEbxPpYAbUe0UZjKn1Z5iuVtihhnY+gx2alv6Aiv45sG+Xv7qCdnXbW6I0EuI6eOEKeUgP2FHAffRdGkk</em>5Qbc4q74GgjDJPVAZOHppI7QMx3z89ndBEWZ6bTUEkNVBQqy8vusgogoIf<em>OWXrbCr4nwSyx1G3pvNnLJrbt4I4udaSfj8qKWJoZX8BvNl4yJBy5P1XW+E1WJX4pp74oKaI6L9QXrV5HECzec7KwA9CsTmigSZmKasgI5V62q1HiGyfygz7H</em>Pwf7EykW0vgq4Qs9R1U=|lvUD&quot;
    },
    &quot;password&quot;: {
        &quot;alg&quot;: &quot;gpgme&quot;,
        &quot;args&quot;: {
          &quot;kid&quot;: &quot;keyId&quot;
        },
        &quot;value&quot;: &quot;NcUeEoRHrl1LrVsYml9R8oZVAaYNv2rCcYLF2RwPHD9i62Xrf9tBiyQLjGSmScGJlbubztHh6ZHEeMv2zEELNMt6N0yc7tGsI4s7aSxVs5LfibwGeKGelZUgv41Fi<em>F32SvTTDepL3M20PlPpE</em>wp1lPv8WewWsa<em>kPJz6m63x2MinF1l13UvNQ7i61FPkjdYBclmM1oiqaztqPYG6uBINm1We</em>oKvWe3kEsDfRh4Gwg4J5YSe8rjNwM1wNzrNsj4+FI3abav9TpqQAcG<em>t261TdB3ocdt3L6</em>5Cd+KLqnIhDEpCwBUlt747bo4XNXH4Z4Tzpclh<em>a4CzNW+jyoDSo6Yddt6wwNn+75NKlkPIOOt2JorZiTFA1MJ97imRIiAfbaz8yzs3WC1lr</em>uPtaP2rmslHdGIC9uprrMp7hBoyeYTEwy5QN5lWuJzGq9siKSChrXTy<em>KP6eSQiL6WIN1BquDigOio8N1ezjokkRZZo8ijDERIYciZZuMfEW3kbDZIFx0</em>cBgeM<em>5kfpkK8lCmuMeXM9WxFhNGKkOgrlAFzbukuOqxnOxlHvyrwb7qwWc4zmvz9R+O0twwU8sJjqoDIUliX9nZ</em>mAGkG9rKwZhY3AbWN1QAF<em>yPY2+2FfVXm7</em>7ZN7x5GCXYQ86ov+yl976mk5jGqyg5CHKYA9673ruA=|VpMaDn9r0II=&quot;
    }
}
</pre><p>Encrypted file <code>config</code> could be decrypted back using the same metadata:</p><pre>host = &quot;localhost&quot;
user = &quot;foo&quot;
password = &quot;5fce4e0edf22&quot;
</pre><p>&#127881;</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short">module <a href="E-Template.html">E.Template</a></li><li class="src short">module <a href="E-Metadata.html">E.Metadata</a></li><li class="src short">module <a href="E-Encrypt.html">E.Encrypt</a></li><li class="src short">module <a href="E-Action.html">E.Action</a></li><li class="src short">module <a href="E-Algorithm-Dummy.html">E.Algorithm.Dummy</a></li><li class="src short">module <a href="E-Describe.html">E.Describe</a></li><li class="src short"><a href="#v:pack">pack</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></li><li class="src short">module <a href="../either-4.4.1.1/Control-Monad-Trans-Either.html">Control.Monad.Trans.Either</a></li></ul></div><div id="interface"><h1 id="g:1">Template - representation of an encrypted or to-be-encrypted content.</h1><div class="top"><p class="src">module <a href="E-Template.html">E.Template</a></p></div><h1 id="g:2">Metatada - ciphered values store</h1><div class="top"><p class="src">module <a href="E-Metadata.html">E.Metadata</a></p></div><h1 id="g:3">Cipher values from <code><a href="E-Template.html#t:Tem">Tem</a></code> using <code><a href="E-Metadata.html#t:Metadata">Metadata</a></code></h1><div class="top"><p class="src">module <a href="E-Encrypt.html">E.Encrypt</a></p></div><h1 id="g:4">Cipher actions on the filesystem</h1><div class="top"><p class="src">module <a href="E-Action.html">E.Action</a></p></div><h1 id="g:5">Simplest instance of Algs</h1><div class="top"><p class="src">module <a href="E-Algorithm-Dummy.html">E.Algorithm.Dummy</a></p></div><h1 id="g:6">Errors</h1><div class="top"><p class="src">module <a href="E-Describe.html">E.Describe</a></p></div><h1 id="g:7">Reexports</h1><div class="top"><p class="src"><a id="v:pack" class="def">pack</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a> <a href="#v:pack" class="selflink">#</a></p><div class="doc"><p><em>O(n)</em> Convert a <code><a href="../base-4.10.0.0/Data-String.html#t:String">String</a></code> into a <code><a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></code>.  Subject to
 fusion.  Performs replacement on invalid scalar values.</p></div></div><div class="top"><p class="src">module <a href="../either-4.4.1.1/Control-Monad-Trans-Either.html">Control.Monad.Trans.Either</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>